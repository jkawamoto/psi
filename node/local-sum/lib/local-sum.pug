//-
//- local-sum.pug
//-
//- Copyright (c) 2016 Junpei Kawamoto
//-
//- This program is free software: you can redistribute it and/or modify
//- it under the terms of the GNU General Public License as published by
//- the Free Software Foundation, either version 3 of the License, or
//- (at your option) any later version.
//-
//- This program is distributed in the hope that it will be useful,
//- but WITHOUT ANY WARRANTY; without even the implied warranty of
//- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//- GNU General Public License for more details.
//-
//- You should have received a copy of the GNU General Public License
//- along with this program.  If not, see <http://www.gnu.org/licenses/>.
script(type="text/javascript")
    :babel(presets=["es2015"])
        RED.nodes.registerType("local-sum", {
            category: "function",
            color: "#a6bbcf",
            defaults: {
                name: { value: "" }
            },
            inputs: 1,
            outputs: 1,
            icon: "arrow-in.png",
            label(){
                return this.name || "Local Aggregator";
            },
            labelStyle(){
                return this.name ? "node_label_italic" : "";
            }
        });

script(type="text/x-red", data-template-name="local-sum")
    .form-row
        label(for="node-input-name")
            <i class="icon-tag"></i> Name
        input#node-input-name(type="text", placeholder="Name")


script(type="text/x-red", data-help-name="local-sum")
    :markdown-it
        A Node-RED node of aggregating topics and compute summation of those values.
        This node is a part of [Privacy-Preserving Stream Integration](https://github.com/jkawamoto/psi) project.

        This node assumes payloads of input messages are lists.
